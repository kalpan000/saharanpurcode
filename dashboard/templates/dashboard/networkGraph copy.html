<!DOCTYPE html>
<html>

{% extends 'dashboard/header_footer.html' %} {% load static %}{% block title %} Network Summary {% endblock title %} {% block css %}

<style>
    .col-md-2 {
        width: 18%;
        max-width: 34.667%;
        -webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, .15), 0 2px 2px rgba(0, 0, 0, .15), 0 4px 4px rgba(0, 0, 0, .15), 0 8px 8px rgba(0, 0, 0, .15);
        box-shadow: 0 1px 1px rgba(0, 0, 0, .15), 0 2px 2px rgba(0, 0, 0, .15), 0 4px 4px rgba(0, 0, 0, .15), 0 8px 8px rgba(0, 0, 0, .15);
    }
    
    .col-md-6 {
        padding: 0px;
        -webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, .15), 0 2px 2px rgba(0, 0, 0, .15), 0 4px 4px rgba(0, 0, 0, .15), 0 8px 8px rgba(0, 0, 0, .15);
        box-shadow: 0 1px 1px rgba(0, 0, 0, .15), 0 2px 2px rgba(0, 0, 0, .15), 0 4px 4px rgba(0, 0, 0, .15), 0 8px 8px rgba(0, 0, 0, .15);
    }
    
    .inner-block {
        background-color: #eee;
    }
    
    .col-md-offset-1 {
        margin-left: 1.333%;
    }

    svg circle.node {
  fill: #3b5998;
  stroke: #1b3978;
  stroke-width: 1.5px;
}

svg line.link {
  stroke: #222;
  stroke-opacity: .6;
  stroke-width: 2px;
}

div.tooltip {   
  position: absolute;           
  text-align: center;
  opacity: 0;
  visibility: hidden;
  width: 80px;                  
  height: 28px;                 
  padding: 2px;             
  font: 12px sans-serif;        
  background: #8fb3de;   
  border: 0px;      
  border-radius: 8px;           
  pointer-events: none;         
}


.networkPorts {
    position: relative;
    height: 10px;
    width: 10px;
    margin: 0;
    background-color:green;
}
.modal-body .svg-container{
    width:1500px;
}

</style>
{% endblock %} {% block title_header %}Network{% endblock %} {% block content %}


<div class="portModal" tabindex="-1" role="dialog" style="z-index: 999; position:absolute; display: none; left:50%; transform: translate(-50% , 0);">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Port Information</h5>
        </div>
        <div class="modal-body" style="text-align: left;">
            <p class="portBody">Port Number</p>
            <div id="portChart" class="portChart">  </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary portClose" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="GraphModal1" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">User Messages</h4>
        </div>
        <div class="modal-body" id="graphBody1">
          
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>
  <!-- Modal -->
  <div class="modal fade" id="GraphModal2" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Conversions</h4>
        </div>
        <div class="modal-body" id="graphBody2">
          
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>
  <!-- Modal -->
  <div class="modal fade" id="GraphModal3" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title"></h4>
        </div>
        <div class="modal-body" id="graphBody3">
          
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>
  <!-- Modal -->
  <div class="modal fade" id="GraphModal4" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Orders</h4>
        </div>
        <div class="modal-body" id="graphBody4">
          
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>
  <!-- Modal -->
  <div class="modal fade" id="GraphModal5" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">User Registrations</h4>
        </div>
        <div class="modal-body" id="graphBody5">
          
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>
  <!-- Modal -->
  <div class="modal fade" id="GraphModal6" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title"></h4>
        </div>
        <div class="modal-body" id="graphBody6">
          
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>
  <!-- Modal -->
  <div class="modal fade" id="GraphModal7" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">CPU Utilization</h4>
        </div>
        <div class="modal-body" id="graphBody7">
          
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>
  <!-- Modal -->
  <div class="modal fade" id="GraphModal8" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Memory Utilization</h4>
        </div>
        <div class="modal-body" id="graphBody8">
          
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>
  <!-- Modal -->
  <div class="modal fade" id="GraphModal9" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Throughput In and Out</h4>
        </div>
        <div class="modal-body" id="graphBody9">
          
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>
  <!-- Modal -->
  <div class="modal fade" id="GraphModal10" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Network Monitoring</h4>
        </div>
        <div class="modal-body" id="graphBody10">
          
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>
  <!-- Modal -->
  <div class="modal fade" id="GraphModal11" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Storage Utilization</h4>
        </div>
        <div class="modal-body" id="graphBody11">
          
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>
  <!--MODAL-->
  <div class="modal fade" id="topologyModal" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content" style="width: 1180px;left: -320px;">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">User Messages</h4>
        </div>
        <div class="modal-body topologyBody">
          
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>
  <!-- Modal -->
  <div class="modal fade" id="GraphModal12" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title"></h4>
        </div>
        <div class="modal-body" id="graphBody12">
          
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>
<div class="container" style="margin:0px;">

    <div class="row" style="width:95vw">
        <div class="col-md-4" style="height: 70px; background-color: whitesmoke;">
            <p style="font-size: 10px;text-align: left;">Total Devices</p>
            <div style="margin-left: 188px;" id="myDiv9"></div>

            <p class="totalDevicesNO" style="text-align: left;font-size: 22px;"><b>0</b></p>
        </div>
        <div class="col-md-4" style="height: 70px;  background-color: whitesmoke;">

            <p style="font-size: 10px;text-align: left;">Total Packets Received</p>
            <div style="margin-left: 188px;"  id="myDiv10"></div>
            <p class="inboundNO" style="text-align: left;font-size: 22px;"><b>0 MB</b></p>

        </div>
        <div class="col-md-4" style="height: 70px; background-color: whitesmoke;">

            <p style="font-size: 10px;text-align: left;">Total Packets Sent</p>
            <div style="margin-left: 188px;" id="myDiv11"></div>
            <p class="outboundNO" style="text-align: left;font-size: 22px;"><b>0 MB</b></p>

        </div>
        <div class="col-md-3" style="height: 70px;  background-color: whitesmoke;">

            <p style="font-size: 10px;margin-top: 6px;text-align: left;">Average Utilization</p>
            <div style="margin-left: 188px;" id="myDiv12"></div>
            <p style="margin-top: -23px;text-align: left;font-size: 22px;"><b>82%</b></p>

        </div>
    </div> 
    <br>
    <div class="row" style='width:95vw'>
        <div class="col-md-2" style="">
            <div class="row" style="height: 120px; background-color: #f8f9fa; padding: 13px;">
                <div id="myDiv1" style="margin-left: 10px;" type="button" data-toggle="modal" data-target="#GraphModal1"></div>
            </div>
            <div class="row" style="height: 30px; background-color: #e9ecef; font-size: 15px; font-weight: bold;">Utilization & Throughput</div>
        </div>
        <div class="col-md-2 col-md-offset-1" style="">
            <div class="row" style="height: 120px;  background-color: #f8f9fa; padding: 13px;">
                <div id="myDiv2" style="margin-left: 10px;" type="button" data-toggle="modal" data-target="#GraphModal2"></div>
            </div>
            <div class="row" style="height: 30px; background-color: #e9ecef; font-size: 15px; font-weight: bold;">Top 5 Busy Devices</div>
        </div>
        <div class="col-md-2 col-md-offset-1" style="">
            <div class="row" style="height: 120px; background-color: #f8f9fa; padding: 13px;">
                <div id="myDiv3" style="margin-left: 10px;text-align: left;">
                    <h5>Event List</h5>
                    <p>Event 1 <button class="btn btn-primary">Add</button></p>
                </div>
            </div>
            <div class="row" style="height: 30px; background-color: #e9ecef; font-size: 15px; font-weight: bold;">Events</div>
        </div>
        <div class="col-md-2 col-md-offset-1" style="">
            <div class="row" style="height: 120px; background-color: #f8f9fa; padding: 13px;">
                <div id="myDiv4" style="margin-left: 10px;" type="button" data-toggle="modal" data-target="#GraphModal4"></div>
            </div>
            <div class="row" style="height: 30px; background-color: #e9ecef; font-size: 15px; font-weight: bold;">Avg Memory Utilization</div>
        </div>
        <div class="col-md-2 col-md-offset-1" style="">
            <div class="row" style="height: 120px; background-color: #f8f9fa; padding: 13px;">
                <div id="myDiv5" style="margin-left: 10px;" type="button" data-toggle="modal" data-target="#GraphModal5"></div>
            </div>
            <div class="row" style="height: 30px; background-color: #e9ecef; font-size: 15px; font-weight: bold;">Core Performance</div>
        </div>
    </div>
    <br>
    <div class="row" style='width:95vw'>
        <div class="col-md-6" style="height: 275px;width: 44%;">
            <table class="table table-striped" style="background-color: #fff;">
                <thead>
                    <tr>
                        <th scope="col" colspan="4"  style="text-align: center;">Task</th>
                    </tr>
                    <tr>
                        <th scope="col">Task</th>
                        <th scope="col">Status</th>
                        <th scope="col">Progress</th>
                        <th scope="col">Due Date</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row">ALTR-231</th>
                        <td>
                            <span style="background-color: hotpink; ">In progress</span>
                        </td>
                        <td>Otto</td>
                        <td>24.11.2015</td>
                    </tr>
                    <tr>
                        <th scope="row">ALTR-232</th>
                        <td><span style="background-color: rgb(105, 255, 125);">open</span></td>
                        <td>Thornton</td>
                        <td>25.11.2015</td>
                    </tr>
                    <tr>
                        <th scope="row">ALTR-233</th>
                        <td><span style="background-color: rgb(105, 115, 255);">none</span></td>
                        <td>the Bird</td>
                        <td>26.11.2015</td>
                    </tr>
                    <tr>
                        <th scope="row">ALTR-234</th>
                        <td><span style="background-color: rgb(255, 105, 175);">none</span></td>
                        <td>the Bird</td>
                        <td>27.11.2015</td>
                    </tr>
                    <tr>
                        <th scope="row">ALTR-235</th>
                        <td><span style="background-color: rgb(238, 105, 255);">none</span></td>
                        <td>the Bird</td>
                        <td>28.11.2015</td>
                    </tr>
                    <tr>
                        <th scope="row">ALTR-236</th>
                        <td><span style="background-color: rgb(253, 255, 105);">none</span></td>
                        <td>the Bird</td>
                        <td>30.11.2015</td>
                    </tr>
                </tbody>
            </table>

        </div>

        <div class="col-md-6 col-md-offset-1" style="height: 275px;" type="button" data-toggle="modal" data-target="#topologyModal">
            <div style="background-color: #fff;">
                <p style="text-align: left;"><b>Simple Connection Topology</b></p>
            <div class="topologyBody">
        </div>
            </div><br>
            <div class="row">
                <a class="btn btn-primary" href="{% url 'topology-graph' %}">Network Topology</a>
            </div>
        </div>
    </div>

</div>

<style>

    .card-item {
        background-color: white;
        border: 1px solid black;
        min-height: 100px;
        max-height: 200px;
        margin: 10px;
        box-shadow: 0px 0px 10px black;
    }

</style>


<section class="col-md-12" style=" text-align: left; margin-top: 100px; margin-bottom: 100px; background-color: white; padding-top: 20px; padding-bottom: 20px;">


    <select style="padding: 10px; text-align: center;" class="col-md-12 allNetworkDevices">
        <option selected disabled> -- Select A Network -- </option>
    </select>

    <div class="accordion col-md-12" id="accordionExample" style="background-color: white;">
        <div class="card col-md-12">
          <div class="card-header" id="headingOne">
            <h5 class="mb-0">
              <button class="btn col-md-12 networkDiagramHeading"  type="button" style="display:none; ;padding: 10px; margin: 30px; margin-left: 0px; background-color: cyan;" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                Network One
              </button>
            </h5>
          </div>
      
          <div id="collapseOne" class="collapse col-md-12" aria-labelledby="headingOne" data-parent="#accordionExample" style="overflow: hidden;">
            <div class="card-body">
                <div class="card card-item col-md-3 ">
                    <div class="card-body"  style="font-size: 40px;">
                      <h5 class="card-title">Uptime</h5>
                      <p class="card-text uptimeTime">10D 03:54:23</p>
                    </div>
                </div>
            
                <!-- <div class="card card-item col-md-1">
                    <img class="card-img-top" src="{% static '/dashboard/images/earth_blue.png' %}" alt="Card image cap" height="50" width="50">
                </div> -->

                <style>
                    .networkDiagram{
                        position: relative;
                        width: 100%;
                        height: 100%;
                        padding: 0;
                    }
                    .networkDiagram > * {
                        margin: 0;
                    }
                    .networkPort{
                        display: inline-block;
                        position: relative;
                        height: 25px;
                        cursor: pointer;
                        width: 25px;
                        margin-right: 5px;
                        text-align: center;
                        background-image: linear-gradient(0deg, rgba(0,255,0,.5), rgba(0,255,0,.5)), url("{% static '/dashboard/images/port.png' %}");
                        background-size: 100% 100%;
                    }

                    .uplink {
                        background-image: linear-gradient(0deg, rgba(144,238,144,.5), rgba(144,238,144,.5)), url("{% static '/dashboard/images/port.png' %}");
                        background-color: rgb(144, 238, 144);
                    }

                    .downlink {
                        background-image: linear-gradient(0deg, rgba(173,216,230,.5), rgba(173,216,230,.5)), url("{% static '/dashboard/images/port.png' %}");
                        background-color:rgb(173, 216, 230);
                    }

                    .admin {
                        background-image: linear-gradient(0deg, rgba(255,166,0,.5), rgba(255,166,0,.5)), url("{% static '/dashboard/images/port.png' %}");
                        background-color: rgb(255, 166, 0);
                    }
                </style>

                <div class="card card-item col-md-8" style="overflow:hidden">
                    <div class="card-body" style="padding: 0; overflow:hidden">
                        <div class="networkDiagram col-md-12">
  
                        </div>

                        <div class="col-md-12">
                            <h4 class="col-md-3 uplink" style="padding: 5px; background-image: none;" >Link Up </h4>
                            <h4 class="col-md-3 downlink" style="padding: 5px; background-image: none;">Link Down</h4>
                            <h4 class="col-md-3 admin" style="padding: 5px; background-image: none;">Admin Down</h4>
                        </div>
                    </div>
                </div>

                
                <h1 style="margin: 5px;" class="col-md-12" >  </h1>


                <!-- <div class="card card-item col-md-2" style="width: auto;">
                    <div class="card-body">
                      <h5 class="card-title">Memory Utilization</h5>
                      <div class="card-text" id="memory" style=" position: relative; width:140px; height: 150px;"  type="button" data-toggle="modal" data-target="#GraphModal8"></div>
                    </div>
                </div>
                <div class="card card-item col-md-2" style="width: auto;">
                    <div class="card-body">
                      <h5 class="card-title">CPU Utilization</h5>
                      <div class="card-text" id="cpu" style=" position: relative; width:140px; height: 150px; text-align:center; align-items: center; align-content: center;"  type="button" data-toggle="modal" data-target="#GraphModal7"></div>
                    </div>
                </div>
               
                <div class="card card-item col-md-7">
                    <div class="card-body col-md-12 ">
                        <h5 class="card-title">Network Monitoring</h5>
                        <div class="card-text col-md-12" id="networkmonitoring" style=" position: relative; height: 150px;" type="button" data-toggle="modal" data-target="#GraphModal10"></div>
                    </div>
                </div>

                
                <h1 style="margin: 5px;" class="col-md-12" >  </h1>


                <div class="card card-item col-md-2" style="width: auto;">
                    <div class="card-body">
                      <h5 class="card-title">Storage Utilization</h5>
                      <div class="card-text" id="storage2" style=" position: relative; width:140px; height: 150px;"  type="button" data-toggle="modal" data-target="#GraphModal11"></div>
                    </div>
                </div>

                <div class="card card-item col-md-4">
                    <div class="card-body">
                      <h5 class="card-title">Throughput In and Out</h5>
                      <div class="card-text col-md-12" id="throughput" style=" position: relative; height: 150px;"  type="button" data-toggle="modal" data-target="#GraphModal9"></div>
                    </div>
                </div>

              
                <div class="card card-item col-md-5">
                    <div class="card-body col-md-12">
                      <h5 class="card-title">Events </h5>
                        <div class="card card-item col-md-2">
                            <div class="card-body">
                            <h5 class="card-title">Events </h5>
                            <p class="card-text" style="text-align: left;">Event 1 </p>
                            </div>
                        </div>
                        <div class="card card-item col-md-2">
                            <div class="card-body">
                            <h5 class="card-title">Events </h5>
                            <p class="card-text" style="text-align: left;">Event 1 </p>
                            </div>
                        </div>
                        <div class="card card-item col-md-2">
                            <div class="card-body">
                            <h5 class="card-title">Events </h5>
                            <p class="card-text" style="text-align: left;">Event 1 </p>
                            </div>
                        </div>
                        <div class="card card-item col-md-2">
                            <div class="card-body">
                            <h5 class="card-title">Events </h5>
                            <p class="card-text" style="text-align: left;">Event 1 </p>
                            </div>
                        </div>
                    </div>
                </div> -->


            </div>

          </div>
        </div>


</section>
<script src="{% static '/dashboard/js/d3.min.js' %}"></script>
<script src="{% static '/dashboard/js/plotly.js' %}"></script>
<script type="text/javascript" src="{% static '/dashboard/js/echarts.min.js' %}"></script>
<script type="text/javascript" src="{% static '/dashboard/js/echarts-liquidfill.min.js' %}"></script>



{{ snmpdevices|json_script:"snmpdevices" }}

<script>
    var ENABLE_UPTIME = false;
    var ENABLE_PORT_LOGGING = false;
    var SELECTED_DEVICE = false;
    var UPTIME_SECONDS = 0;
    var PORT_OUTBOUND = [];
    var PORT_INBOUND = [];
    var SELECTED_PORT = -1;

    console.log("pinting snmp devices data");
    var snmpDevices = JSON.parse(document.getElementById("snmpdevices").textContent);
    console.log(snmpDevices);

    for(key in snmpDevices){
        $(".allNetworkDevices").append("<option value="+ snmpDevices[key]["id"] +" >" + snmpDevices[key]["name"] + "</option>")
    }


    function getPortDatas(val){
        if(!ENABLE_PORT_LOGGING) return;
        if(!SELECTED_DEVICE) return;

        $.get("getDeviceData/?id=" + SELECTED_DEVICE , function(data , status){
            console.log("PORT DATA IS ");
            console.log(data);
            
            if(data["error"]){
                Swal.fire(data["message"]);
                ENABLE_UPTIME = false;
                return;
            }
            
            if(data["data"]["uptime"]){
                UPTIME_SECONDS = data["data"]["uptime"] / 100;
                ENABLE_UPTIME = true;
            }

            $(".networkDiagramHeading").css("display" , "block");
            data = data["data"];
            printPorts(data["output"] , data["inbound"] , data["outbound"] , data["macaddress"]);

            console.log("SELECTED PORT " + (SELECTED_PORT - 1));
            if(SELECTED_PORT != -1){
                console.log("SELECTED PORT " + (SELECTED_PORT - 1));
               
                port = SELECTED_PORT;
                inb = data["inbound"][SELECTED_PORT - 1];
                oub = data["outbound"][SELECTED_PORT - 1];
                mac = data["macaddress"][SELECTED_PORT - 1];
                ss = data["output"][SELECTED_PORT - 1]; 

                if(ss == 0) ss = "DOWN";
                else if (ss == -1) ss = "ADMIN DOWN";
                else ss = "UP";

                $(".portBody" ).html("<p>Port Number : "+ port +"<br>Status : " + ss + "<br>Packets Received : " + inb + "<br>Packets Sent : " + oub + "<br>Mac : " + mac + "</p>")
                PORT_INBOUND.push( parseInt(data["inbound"][SELECTED_PORT - 1].substring(0 , data["inbound"][SELECTED_PORT - 1].length - 2 )) );
                PORT_OUTBOUND.push( parseInt(data["outbound"][SELECTED_PORT - 1].substring(0 , data["outbound"][SELECTED_PORT - 1].length - 2 )) );
            }
        });
    }

    $(".allNetworkDevices").on("change" , function(){
        console.log("Selected value index " + this.value);
        $(".networkDiagramHeading").html( $(this).children("option:selected").text() ); 
        SELECTED_DEVICE = this.value;
        ENABLE_PORT_LOGGING = true;
        getPortDatas(this.value);
        
    });

    
    function AddZero(i){
        return i < 10 ? "0" + i : i;
    }
    
    var d;
    var firstRun = true;
    function uptime(){
        
        d = new Date(); 
        d.setMonth(0);
        d.setDate(0);
        d.setHours(0);
        d.setMinutes(0);

        setInterval(function() {
        
            if(!ENABLE_UPTIME) return;
            
            if(firstRun){
                d.setSeconds(UPTIME_SECONDS, 0);
                firstRun = false;
            }

            var finalTime = "";
            if (d.getMonth() != 11){
                finalTime += d.getMonth()+"M";
            }
            if (d.getDate() != 31){
                finalTime += d.getDate()+"D";
            }
            finalTime += AddZero(d.getHours()) + ":";
            finalTime += AddZero(d.getMinutes()) + ":";
            finalTime += AddZero(d.getSeconds());

            $(".uptimeTime").text(finalTime);

            d.setTime(d.getTime() + 1000);
        }, 1000);
    }

    function getDataForSummary(){
        $.get("summary/" , function(data , status){
            console.log(" Summary for network ");
            console.log(data);
            if(data["error"]){
                Swal.fire(data["message"])
                return;
            }
            $(".totalDevicesNO").html("<b>" + data['totalDevices'] + "</b>");
            $(".inboundNO").html("<b>" + data['inbound'] + " MB </b>");
            $(".outboundNO").html("<b>" + data['outbound'] + " MB </b>");
        })
    }

    uptime();
    
    getDataForSummary();


    setInterval( getDataForSummary , 5000 );

    // var value = JSON.parse(document.getElementById("networkGraph").textContent);
    // //console.log("HEHEHE");
    // //var value = {'error': false, 'data': {'states': [{'1.3.6.1.2.1.2.2.1.9.1': 0}, {'1.3.6.1.2.1.2.2.1.9.2': 0}, {'1.3.6.1.2.1.2.2.1.9.3': 0}, {'1.3.6.1.2.1.2.2.1.9.4': 0}, {'1.3.6.1.2.1.2.2.1.9.5': 0}, {'1.3.6.1.2.1.2.2.1.9.6': 0}, {'1.3.6.1.2.1.2.2.1.9.7': 0}, {'1.3.6.1.2.1.2.2.1.9.8': 0}, {'1.3.6.1.2.1.2.2.1.9.9': 0}, {'1.3.6.1.2.1.2.2.1.9.10': 0}, {'1.3.6.1.2.1.2.2.1.9.11': 0}, {'1.3.6.1.2.1.2.2.1.9.12': 0}, {'1.3.6.1.2.1.2.2.1.9.13': 0}, {'1.3.6.1.2.1.2.2.1.9.14': 0}, {'1.3.6.1.2.1.2.2.1.9.15': 0}, {'1.3.6.1.2.1.2.2.1.9.16': 0}, {'1.3.6.1.2.1.2.2.1.9.17': 0}, {'1.3.6.1.2.1.2.2.1.9.18': 0}, {'1.3.6.1.2.1.2.2.1.9.19': 0}, {'1.3.6.1.2.1.2.2.1.9.20': 0}, {'1.3.6.1.2.1.2.2.1.9.21': 0}, {'1.3.6.1.2.1.2.2.1.9.22': 0}, {'1.3.6.1.2.1.2.2.1.9.23': 715860}, {'1.3.6.1.2.1.2.2.1.9.24': 0}, {'1.3.6.1.2.1.2.2.1.9.25': 0}, {'1.3.6.1.2.1.2.2.1.9.26': 0}, {'1.3.6.1.2.1.2.2.1.9.27': 0}, {'1.3.6.1.2.1.2.2.1.9.28': 0}], 'portCount': 28}}
    // console.log(value);
    // value["error"] = false;
    // if(value["error"]){
    //     Swal.fire("Something went wrong! Cannot get ports data");
    // }
    // else {
    //     //value = value["data"]["output"];
    //     value = [1,0,0,-1]
    //     console.log("Port Data")
    //     console.log(value);
    //     printPorts(value)
    // }

    
    MAX_ARRAY_SIZE = 20;
    PORT_ELEMENTS = [];
      
    function xyz(portNumber){
        getPortDatas(SELECTED_DEVICE);
        graph1("portChart" , "Port Inbound and Outbound" , PORT_INBOUND , PORT_OUTBOUND);
    }

    $("body").on("click" , ".networkPort" , function(){
        var status = $(this).data("status");
        var inbound = $(this).data("inbound");
        var outbound = $(this).data("outbound");
        var mac = $(this).data("mac");
        var port = $(this).data("port");
        PORT_INBOUND = [];
        PORT_OUTBOUND = [];

        $(".portModal").css("display" , "block");

        $(".portBody" ).html("<p>Port Number : "+ port +"<br>Status : " + status.toUpperCase() + "<br>Packets Received : " + inbound + "<br>Packets Sent : " + outbound + "<br>Mac : " + mac + "</p>")
        SELECTED_PORT = port;
        xyz();

        setInterval( function(){
            xyz();
        } , 1000 );

    
        //Swal.fire("Port Details\nPort Number : "+ port +"\nStatus : " + status.toUpperCase() + "\nInbound : " + inbound + "\nOutbound : " + outbound + "\nMac : " + mac);
    });
    
    $(".portClose").on("click" , function(){
        $(".portModal").css("display" , "none");
        SELECTED_PORT = -1;

    });

    function printPorts(value , inbound , outbound , mac){
        var counter = 0;
        var counter2 = 0;
        var portsInARow = Math.ceil(value.length / 2);
        $(".networkDiagram").empty();
        var maxWidth = Math.floor(100 / portsInARow) - 1;

        if(maxWidth > 10){
            maxWidth = 8;
        }

        var minWidth = 2;
        
        var width = maxWidth < minWidth ? minWidth : maxWidth;
        
        var height = 25;
        if(width <= 2){
            height = 20;
        }
        else if(width > 5){
            height = 30;
        }

        width2 = 100;
        var append = "";
        for(i in value){
            counter++;
            counter2++;

            if(counter%2 != 0){
                append = "<div style='position:relative;display:inline-block;width:"+ width +"%; margin:2px; height:"+ (height + height + 5) +"px'>";
                //$(".networkDiagram").append("<div style='position:relative;display:inline-block;width:auto;background:red;height:"+ (height + height + 5) +"px'>"); 
            }

            if(value[i] == 0){
                append += "<div data-port='"+ counter +"' data-status='down' data-mac='"+ mac[counter - 1] +"' data-inbound='"+ inbound[counter - 1] +"' data-outbound='"+ outbound[counter - 1] +"' class='networkPort downlink' style='height:"+ height +"px; width:"+ width2 +"%;' > "+ '' +" </div><br>";
                //$(".networkDiagram").append("<div class='networkPort downlink' style='height:"+ height +"px; width:"+ width +"%;' > "+ counter2 +" </div><br>");
            }
            else if(value[i] == -1){
                append += "<div data-port='"+ counter +"' data-status='admin down' data-mac='"+ mac[counter - 1] +"' data-inbound='"+ inbound[counter - 1] +"' data-outbound='"+ outbound[counter - 1] +"' class='networkPort admin' style='height:"+ height +"px; width:"+ width2 +"%;' > "+ '' +" </div><br>";
                //$(".networkDiagram").append("<div class='networkPort admin' style='height:"+ height +"px; width:"+ width +"%;' > "+ counter2 +" </div><br>");
            }
            else{
                append += "<div data-port='"+ counter +"' data-status='up' data-mac='"+ mac[counter - 1] +"' data-inbound='"+ inbound[counter - 1] +"' data-outbound='"+ outbound[counter - 1] +"'  class='networkPort ' style='height:"+ height +"px; width:"+ width2 +"%;' > "+ '' +" </div><br>";
                //$(".networkDiagram").append("<div class='networkPort' style='height:"+ height +"px; width:"+ width +"%;' > "+ counter2 +" </div><br>");
            }
            
            if(counter%2 == 0){
                $(".networkDiagram").append(append); 
                append = "";
            }
        }

        if(counter%2 != 0){
            $(".networkDiagram").append(append); 
        }
    }
</script>


<script>

	  function insert(arr , element , max_size = MAX_ARRAY_SIZE , insertOnOverflow = true){
            if(arr.length >= max_size){
                if(!insertOnOverflow) return;
                arr.shift();
            }
		    arr.push(element);	
	  }


function graph1(id , Title , inbound , outbound ,  colorList = ["#00ff00" , "#0000ff"] , labels = ["Packets Received" , "Packets Sent"]){
  
        var data = []

        var obj = {
            type: "scatter",
            mode: "lines",
            name: "Packets Received",
            y: inbound,
            line: { color: colorList[0] }
        }

        data.push(obj);

        var obj = {
            type: "scatter",
            mode: "lines",
            name: "Packets Sent",
            y: outbound,
            line: { color: colorList[1] }
        }
        
        data.push(obj);

        var layout = {
            title: {
            text:'Plot Title',
            yaxis: {
                rangemode: 'tozero'
            },
            font: {
                family: 'Courier New, monospace',
                size: 24
            }
        },
        legend: { orientation: "h" },
        margin: {l: 25,r: 0,b: 20,t: 0,pad: 0}
    };

if($("#" + id).length == 0){
  $(parentID).append("<div class='col-md-4' style='min-height:250px' ><h4 class='col-md-12' align='left'  id='h"+id+"' ></h4><div class='col-md-12' id='"+id+"' style='height:200px;'></div></div>");
  $("#h" + id).text(Title);
}
  
Plotly.newPlot(id , data, layout, {displayModeBar: false});

}


</script>

<script>

    //FUNCTION FOR PLOTING STORAGE INFORMATION GRAPGH
    function storageInfo(id , used , avail) {
        var data = [{
            values: [used, avail],
            labels: ['Used', 'Availabale'],
            text: 'Swap Memory',
            textposition: 'inside',
            textinfo:'value',
            domain: {
                column: 1
            },
            name: 'Swap Memory',
            hoverinfo: 'label+name',
            hole: .7,
            type: 'pie'
        }];

        var layout = {
            paper_bgcolor: "rgba(0,0,0,0)",
            plot_bgcolor: "rgba(0,0,0,0)",
            margin: {
                l: 0,
                r: 0,
                b: 0,
                t: 0,
                pad: 0
            },
            legend: {
                x: 0,
                y: 1,
                traceorder: 'normal',
                font: {
                size: 10,
                },
                "orientation": "h"
            },
            
            showlegend: false,
            //legend: {"orientation": "h"},
            //legend: {"orientation": "h"},
            grid: {
                rows: 1,
                columns: 1
            },
        }

        
        var config = {responsive: true,displayModeBar: false};
        
        Plotly.newPlot(id, data, layout, config, {
            displayModeBar: false
        });
    }


    //FUNCTION FOR PLOTING STORAGE INFORMATION GRAPGH
    function cpuAndMemory(id , used = 50 , avail = 100 , labelData = ["Download" , "Upload"]) {
        var data = [{
            values: [used, avail],
            labels: labelData,
            text: 'Swap Memory',
            textposition: 'inside',
            textinfo:'value',
            domain: {
                column: 1
            },
            name: 'Swap Memory',
            hoverinfo: 'label+name',
            hole: .7,
            type: 'pie'
        }];

        var layout = {
            paper_bgcolor: "rgba(0,0,0,0)",
            plot_bgcolor: "rgba(0,0,0,0)",
            margin: {
                l: 0,
                r: 0,
                b: 0,
                t: 0,
                pad: 0
            },
            legend: {
                x: 0,
                y: 1,
                traceorder: 'normal',
                font: {
                size: 10,
                },
                "orientation": "h"
            },

            
            showlegend: false,
            grid: {
                rows: 1,
                columns: 1
            },   
        };

        var config = {responsive: true,displayModeBar: false};
        Plotly.newPlot(id, data, layout, config, {
            displayModeBar: false
        });
    }
    function networkMonitoring(id , download = [1,10,2,3,43,6,8,4,54,100 ,34,23,0] ,upload = [1,10,34,3,43,454,8,4,54,21 ,34,23,0], time = [1,2,3,4,5,6,7,8,9,10]) {
        var layout = {
			  title: "Basic Time Series",
			  legend: { orientation: "h" },
			  margin: {
				  l: 0,
				  r: 0,
				  b: 0,
				  t: 0,
				  pad: 0
			  }
		  };


        var trace1 = {
            y : download,
            type: 'lines',
            name: 'Download'
        };

        

        var trace2 = {
            
            y: upload,
            type: 'lines',
            name: 'Upload'
        };

        var data = [trace1, trace2];
        
        var config = {responsive: true,displayModeBar: false};

        Plotly.newPlot(id, data, layout, config, {
            displayModeBar: false
        });
            
    }

    window.setTimeout(function(){
        networkMonitoring("networkmonitoring" ,  [10,203,70,150,120,0, 190]);
        networkMonitoring("graphBody10" ,  [10,203,70,150,120,0, 190]);
        networkMonitoring("throughput" , [23,43,6,4,545,8,32,435,5,132,4,6,] , [23,43,250,4,345,6,32,435,40,232,6,10,] , ["In" , "Out"]);
        networkMonitoring("graphBody9" , [23,43,6,4,545,8,32,435,5,132,4,6,] , [23,43,250,4,345,6,32,435,40,232,6,10,] , ["In" , "Out"]);
        cpuAndMemory("cpu");
        cpuAndMemory("graphBody7");
        cpuAndMemory("memory" , 90 , 100);
        cpuAndMemory("graphBody8" , 90 , 100);
        storageInfo("storage2" , 10 , 100);
        storageInfo("graphBody11" , 10 , 100);
    } , 2000);

</script>

<script>
    var ultimateColors = [
        ['rgb(51,153,255)', 'rgb(255,255,255)'],
        ['rgb(0,255,128)', 'rgb(255,255,255)'],
        ['rgb(192, 192, 192)', 'rgb(255,255,255)']
    ];
    var trace1 = {
        x: ['D1', 'D2', 'D3', 'D4', 'D5', 'D6'],
        y: [20, 14, 23, 45, 43, 67],
        name: 'SF Zoo',
        type: 'bar',
        marker: {
            color: 'rgb(128, 0, 0)',
        }
    };

    var data = [trace1];

    var layout = {
        paper_bgcolor: "rgba(0,0,0,0)",
        plot_bgcolor: "rgba(0,0,0,0)",
        margin: {
            l: 0,
            r: 0,
            b: 0,
            t: 0,
            pad: 0
        },
        legend: {
            x: 0,
            y: 1,
            traceorder: 'normal',
            font: {
                size: 10,
            },
            "orientation": "h"
        },

        showlegend: false,
        height: 30,
        width: 30,
    };

    Plotly.newPlot('myDiv9', data, layout);
    var data = [{
        values: [90, 10],
        labels: ['90', '10'],
        text: 'Text',
        textposition: 'none',
        textinfo: 'value',
        domain: {
            column: 1
        },
        name: 'Data',
        hoverinfo: 'label+name',
        hole: .9,
        marker: {
            colors: ultimateColors[0]
        },
        type: 'pie'
    }];

    var layout = {
        paper_bgcolor: "rgba(0,0,0,0)",
        plot_bgcolor: "rgba(0,0,0,0)",
        margin: {
            l: 0,
            r: 0,
            b: 0,
            t: 0,
            pad: 0
        },
        legend: {
            x: 0,
            y: 1,
            traceorder: 'normal',
            font: {
                size: 10,
            },
            "orientation": "h"
        },

        showlegend: false,
        grid: {
            rows: 1,
            columns: 1
        },
        height: 100,
        width: 180,
        grid: {
            rows: 1,
            columns: 1
        },
        annotations: [{
            font: {
                size: 15
            },
            showarrow: false,
            text: '90%',
            x: 0.50,
            y: 0.5
        }],
    };

    var config = {
        responsive: true
    }

    Plotly.newPlot('myDiv1', data, layout);
    Plotly.newPlot('graphBody1', data, {
        paper_bgcolor: "rgba(0,0,0,0)",
        plot_bgcolor: "rgba(0,0,0,0)",
        margin: {
            l: 80,
            r: 0,
            b: 0,
            t: 0,
            pad: 0
        },
        legend: {
            x: 0,
            y: 1,
            traceorder: 'normal',
            font: {
                size: 10,
            },
            "orientation": "h"
        },

        showlegend: false,
        grid: {
            rows: 1,
            columns: 1
        },
        height: 500,
        width: 500,
        grid: {
            rows: 1,
            columns: 1
        },
        annotations: [{
            font: {
                size: 15
            },
            showarrow: false,
            text: '90%',
            x: 0.50,
            y: 0.5
        }],
    });
    var trace1 = {
        x: [1, 2, 3, 4],
        y: [10, 15, 13, 17],
        type: 'scatter'
    };

    var data = [trace1];
    var layout = {
        paper_bgcolor: "rgba(0,0,0,0)",
        plot_bgcolor: "rgba(0,0,0,0)",
        margin: {
            l: 0,
            r: 0,
            b: 0,
            t: 0,
            pad: 0
        },
        legend: {
            x: 0,
            y: 1,
            traceorder: 'normal',
            font: {
                size: 10,
            },
            "orientation": "h"
        },

        showlegend: false,
        grid: {
            rows: 1,
            columns: 1
        },
        height: 30,
        width: 40,
        grid: {
            rows: 1,
            columns: 1
        },
    };
    Plotly.newPlot('myDiv10', data, layout);

    var data = [{
        values: [90, 10],
        labels: ['90', '10'],
        text: 'Text',
        textposition: 'none',
        textinfo: 'value',
        domain: {
            column: 1
        },
        name: 'Data',
        hoverinfo: 'label+name',
        hole: .6,
        marker: {
            colors: ultimateColors[0]
        },
        type: 'pie'
    }];

    var layout = {
        paper_bgcolor: "rgba(0,0,0,0)",
        plot_bgcolor: "rgba(0,0,0,0)",
        margin: {
            l: 0,
            r: 0,
            b: 0,
            t: 0,
            pad: 0
        },
        legend: {
            x: 0,
            y: 1,
            traceorder: 'normal',
            font: {
                size: 10,
            },
            "orientation": "h"
        },

        showlegend: false,
        grid: {
            rows: 1,
            columns: 1
        },
        height: 20,
        width: 20,
        grid: {
            rows: 1,
            columns: 1
        },
    };

    var config = {
        responsive: true
    }

    Plotly.newPlot('myDiv11', data, layout);

    var trace1 = {
        type: "scatter",
        mode: "lines",
        x: [1, 2, 3, 4],
        y: [12, 10, 14, 8],
        line: {
            color: '#17BECF'
        }
    }
    var layout = {
        paper_bgcolor: "rgba(0,0,0,0)",
        plot_bgcolor: "rgba(0,0,0,0)",
        margin: {
            l: 0,
            r: 0,
            b: 0,
            t: 0,
            pad: 0
        },
        legend: {
            x: 0,
            y: 1,
            traceorder: 'normal',
            font: {
                size: 10,
            },
            "orientation": "h"
        },

        showlegend: false,
        grid: {
            rows: 1,
            columns: 1
        },
        height: 30,
        width: 40,
        grid: {
            rows: 1,
            columns: 1
        },
    };

    var data = [trace1];

    Plotly.newPlot('myDiv12', data, layout);


    var trace1 = {
        x: ['D1', 'D2', 'D3', 'D4', 'D5', 'D6'],
        y: [20, 14, 23, 45, 43, 67],
        name: 'SF Zoo',
        type: 'bar',
        marker: {
            color: 'rgb(128, 0, 0)',
        }
    };

    var data = [trace1];

    var layout = {
        paper_bgcolor: "rgba(0,0,0,0)",
        plot_bgcolor: "rgba(0,0,0,0)",
        margin: {
            l: 0,
            r: 0,
            b: 0,
            t: 0,
            pad: 0
        },
        legend: {
            x: 0,
            y: 1,
            traceorder: 'normal',
            font: {
                size: 10,
            },
            "orientation": "h"
        },

        showlegend: false,
        height: 100,
        width: 180,
    };

    Plotly.newPlot('myDiv2', data, layout);
    Plotly.newPlot('graphBody2', data, {
        paper_bgcolor: "rgba(0,0,0,0)",
        plot_bgcolor: "rgba(0,0,0,0)",
        margin: {
            l: 80,
            r: 0,
            b: 0,
            t: 0,
            pad: 0
        },
        legend: {
            x: 0,
            y: 1,
            traceorder: 'normal',
            font: {
                size: 10,
            },
            "orientation": "h"
        },

        showlegend: false,
        height: 500,
        width: 500,
    });


    var data = [{
        values: [53, 47],
        labels: ['53', '47'],
        text: 'Text',
        textposition: 'none',
        textinfo: 'value',
        domain: {
            column: 1
        },
        name: 'Data',
        hoverinfo: 'label+name',
        hole: .9,
        marker: {
            colors: ultimateColors[1]
        },
        type: 'pie'
    }];

    var layout = {
        paper_bgcolor: "rgba(0,0,0,0)",
        plot_bgcolor: "rgba(0,0,0,0)",
        margin: {
            l: 0,
            r: 0,
            b: 0,
            t: 0,
            pad: 0
        },
        legend: {
            x: 0,
            y: 1,
            traceorder: 'normal',
            font: {
                size: 10,
            },
            "orientation": "h"
        },

        showlegend: false,
        grid: {
            rows: 1,
            columns: 1
        },
        height: 100,
        width: 180,
        grid: {
            rows: 1,
            columns: 1
        },
        annotations: [{
            font: {
                size: 15
            },
            showarrow: false,
            text: '53%',
            x: 0.50,
            y: 0.5
        }],
    };

    var config = {
        responsive: true
    }

    Plotly.newPlot('myDiv4', data, layout);
    Plotly.newPlot('graphBody4', data, {
        paper_bgcolor: "rgba(0,0,0,0)",
        plot_bgcolor: "rgba(0,0,0,0)",
        margin: {
            l: 80,
            r: 0,
            b: 0,
            t: 0,
            pad: 0
        },
        legend: {
            x: 0,
            y: 1,
            traceorder: 'normal',
            font: {
                size: 10,
            },
            "orientation": "h"
        },

        showlegend: false,
        grid: {
            rows: 1,
            columns: 1
        },
        height: 500,
        width: 500,
        grid: {
            rows: 1,
            columns: 1
        },
        annotations: [{
            font: {
                size: 15
            },
            showarrow: false,
            text: '53%',
            x: 0.50,
            y: 0.5
        }],
    });

    var data = [{
        values: [67, 33],
        labels: ['67', '33'],
        text: 'Text',
        textposition: 'none',
        textinfo: 'value',
        domain: {
            column: 1
        },
        name: 'Data',
        hoverinfo: 'label+name',
        hole: .9,
        marker: {
            colors: ultimateColors[2]
        },
        type: 'pie'
    }];

    var layout = {
        paper_bgcolor: "rgba(0,0,0,0)",
        plot_bgcolor: "rgba(0,0,0,0)",
        margin: {
            l: 0,
            r: 0,
            b: 0,
            t: 0,
            pad: 0
        },
        legend: {
            x: 0,
            y: 1,
            traceorder: 'normal',
            font: {
                size: 10,
            },
            "orientation": "h"
        },

        showlegend: false,
        grid: {
            rows: 1,
            columns: 1
        },
        height: 100,
        width: 180,
        grid: {
            rows: 1,
            columns: 1
        },
        annotations: [{
            font: {
                size: 15
            },
            showarrow: false,
            text: '67',
            x: 0.50,
            y: 0.5
        }],
    };

    var config = {
        responsive: true
    }

    Plotly.newPlot('myDiv5', data, layout);
    Plotly.newPlot('graphBody5', data, {
        paper_bgcolor: "rgba(0,0,0,0)",
        plot_bgcolor: "rgba(0,0,0,0)",
        margin: {
            l: 80,
            r: 0,
            b: 0,
            t: 0,
            pad: 0
        },
        legend: {
            x: 0,
            y: 1,
            traceorder: 'normal',
            font: {
                size: 10,
            },
            "orientation": "h"
        },

        showlegend: false,
        grid: {
            rows: 1,
            columns: 1
        },
        height: 500,
        width: 500,
        grid: {
            rows: 1,
            columns: 1
        },
        annotations: [{
            font: {
                size: 15
            },
            showarrow: false,
            text: '67',
            x: 0.50,
            y: 0.5
        }],
    });
</script>
<script>
    var   w = 800,
      h =  100,
      circleWidth = 4; 
 

var palette = {
      "lightgray": "#E5E8E8",
      "gray": "#708284",
      "mediumgray": "#536870",
      "blue": "#3B757F"
  }

var colors = d3.scale.category20();

var nodes = [
      { name: "Network"},
      { name: "Network10", target: [0], value: 58 },
      { name: "Network78", target: [0, 1], value: 65 },  
      { name: "Network21", target: [0, 1, 2], value: 52 },
      { name: "Compass", target: [0, 3], value: 48 }, 
      { name: "Susy", target: [0,3,4], value: 40 }, 
      { name: "Breakpoints", target: [0,3,4,5], value: 36 },
      { name: "Network2121", target: [0, 1, 2], value: 52 },
      { name: "Network3434", target: [0, 1, 2, 8], value: 42 },
      { name: "Network5677", target: [0,1,2], value: 35 },
      { name: "Network87878", target: [0,1,2,3,9], value: 67 },
      
];

var links = [];

for (var i = 0; i < nodes.length; i++){
      if (nodes[i].target !== undefined) { 
            for ( var x = 0; x < nodes[i].target.length; x++ ) 
              links.push({
                  source: nodes[i],
                  target: nodes[nodes[i].target[x]]  
              });
      };
};


var myChart = d3.selectAll('.topologyBody')
      .append("div")
        .classed("svg-container", true)
      
      .append('svg')
        .attr("preserveAspectRatio", "xMinYMin meet")
        .attr("viewBox", "0 0 1000 800")
        .classed("svg-content-responsive", true)
//var myChart = d3.select('#topologyBody')
      //.append("div")
        //.classed("svg-container", true)
      
      //.append('svg')
        //.attr("preserveAspectRatio", "xMinYMin meet")
        //.attr("viewBox", "0 0 1000 800")
        //.classed("svg-content-responsive", true)


var force = d3.layout.force()
      .nodes(nodes)
      .links([])
      .gravity(0.1)
      .charge(-1000)
      .size([w,h]); 

      var link = myChart.selectAll('line') 
            .data(links).enter().append('line')
            .attr('stroke', palette.lightgray)
            .attr('strokewidth', '1');

      var node =  myChart.selectAll('circle')  
            .data(nodes).enter() 
            .append('g') 
            .call(force.drag); 

     
     node.append('circle')
            .attr('cx', function(d){return d.x; })
            .attr('cy', function(d){return d.y; })
            .attr('r', function(d,i){
                  console.log(d.value);
                  if ( i > 0 ) {
                        return circleWidth + d.value; 
                  } else {
                        return circleWidth + 35; 
                  }
            })
            .attr('fill', function(d,i){
                  if ( i > 0 ) {
                        return colors(i);
                  } else {
                        return '#fff';
                  }
            })
            .attr('strokewidth', function(d,i){
                  if ( i > 0 ) {
                        return '0';
                  } else {
                        return '2';
                  }
            })
            .attr('stroke', function(d,i){
                  if ( i > 0 ) {
                        return '';
                  } else {
                        return 'black';
                  }
            });


      force.on('tick', function(e){ 
            node.attr('transform', function(d, i){
              return 'translate(' + d.x + ','+ d.y + ')'
            })

          link 
              .attr('x1', function(d){ return d.source.x; }) 
              .attr('y1', function(d){ return d.source.y; })
              .attr('x2', function(d){ return d.target.x; })
              .attr('y2', function(d){ return d.target.y; })
      });


      node.append('text')
            .text(function(d){ return d.name; })
            .attr('font-family', 'Raleway', 'Helvetica Neue, Helvetica')
            .attr('fill', function(d, i){
              console.log(d.value);
                  if ( i > 0 && d.value < 10 ) {
                        return palette.mediumgray;
                  } else if ( i > 0 && d.value >10 ) {
                        return palette.lightgray;
                  } else {
                        return palette.blue;
                  }
            })
            .attr('text-anchor', function(d, i) {
                  return 'middle';
            })
            .attr('font-size', function(d, i){
                  if (i > 0) {
                        return '.8em';
                  } else {
                        return '.9em';    
                  }
            }) 

force.start();



</script>



{% endblock %}